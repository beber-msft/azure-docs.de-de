---
title: Referenzhandbuch für Regeln für die SQL-Sicherheitsrisikobewertung
description: Liste der Titel und Beschreibungen von Regeln für SQL Server, Azure SQL-Datenbank, verwaltete Azure SQL-Instanz und Azure Synapse Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 05/06/2021
ms.openlocfilehash: 8d194718b8fc1f8ac050e91017eafe6d8c9f3c4b
ms.sourcegitcommit: 677e8acc9a2e8b842e4aef4472599f9264e989e7
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/11/2021
ms.locfileid: "132340046"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Referenzhandbuch für Regeln für die SQL-Sicherheitsrisikobewertung
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]  :::image type="icon" source="../media/applies-to/yes.png" border="false"::: SQL Server (alle unterstützten Versionen)

In diesem Artikel erhalten Sie Informationen zu einer Reihe von integrierten Regeln, die Sicherheitsrisiken kennzeichnen und Abweichungen von bewährten Methoden wie Fehlkonfigurationen, übermäßige Berechtigungen und ungeschützte vertrauliche Daten hervorheben. Die Regeln basieren auf bewährten Methoden von Microsoft und konzentrieren sich auf die Sicherheitsprobleme, die das größte Risiko für Ihre Datenbank und deren wertvolle Daten darstellt. Sie betreffen sowohl Probleme auf Datenbankebene als auch Sicherheitsprobleme auf Serverebene wie Server-Firewalleinstellungen und Berechtigungen auf Serverebene. Diese Regeln spiegeln darüber hinaus viele Anforderungen verschiedener Aufsichtsbehörden wider, um deren Konformitätsstandards zu erfüllen.

Welche Regeln bei den Datenbanküberprüfungen angezeigt werden, hängt von Ihrer SQL-Version und der überprüften Plattform ab. 

Informationen zur Implementierung der Sicherheitsrisikobewertung in Azure finden Sie unter [Implementieren der Sicherheitsrisikobewertung](./sql-vulnerability-assessment.md#configure-vulnerability-assessment).

Eine Liste der Änderungen an diesen Regeln finden Sie unter [Änderungsprotokoll für die Regeln der SQL-Sicherheitsrisikobewertung](sql-database-vulnerability-assessment-rules-changelog.md).

## <a name="rule-categories"></a>Regelkategorien

Für die Regeln der SQL-Sicherheitsrisikobewertung gibt es fünf Kategorien, die in den folgenden Abschnitten aufgeführt sind:

- [Authentifizierung und Autorisierung](#authentication-and-authorization)
- [Überwachung und Protokollierung](#auditing-and-logging)
- [Schutz von Daten](#data-protection)
- [Installationsupdates und Patches](#installation-updates-and-patches)
- [Oberflächenverringerung](#surface-area-reduction)

<sup>1</sup> **ab SQL Server 2012**: Gilt für alle Versionen ab SQL Server 2012.

<sup>2</sup> **ab SQL Server 2017**: Gilt für alle Versionen ab SQL Server 2017.

<sup>3</sup> **ab SQL Server 2016**: Gilt für alle Versionen ab SQL Server 2016.

## <a name="authentication-and-authorization"></a>Authentifizierung und Autorisierung

|Regel-ID  |Titel der Regel   |Schweregrad der Regel  |Beschreibung der Regel  |Plattform  |
|---------|---------|---------|---------|---------|
| VA1017     |Ausführungsberechtigungen für „xp_cmdshell“ müssen für alle Benutzer (mit Ausnahme von DBO) widerrufen werden.          |Hoch         |Die erweiterte gespeicherte Prozedur „xp_cmdshell“ erzeugt eine Windows-Befehlsshell und übergibt eine Zeichenfolge zur Ausführung. Mit dieser Regel wird sichergestellt, dass keine Benutzer (mit Ausnahme von Benutzern mit der Berechtigung „CONTROL SERVER“ wie Mitglieder der Serverrolle „sysadmin“) über die Berechtigung zum Ausführen der erweiterten gespeicherten Prozedur „xp_cmdshell“ verfügen.         |<nobr>ab SQL Server 2012<sup>1</sup><nobr/>         |
|VA1020     |Gastbenutzer der Datenbank dürfen keiner Rolle angehören.          |High         |Gastbenutzer dürfen mit beliebigen Anmeldenamen, die keinem bestimmten Datenbankbenutzer zugeordnet sind, auf eine Datenbank zugreifen. Mit dieser Regel wird sichergestellt, dass dem Gastbenutzer keine Datenbankrollen zugewiesen sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>SQL-Datenbank                  |
|VA1042     |Die Besitzverkettung von Datenbanken muss für alle Datenbanken mit Ausnahme von `master`, `msdb` und `tempdb` deaktiviert werden.          |Hoch         |Die datenbankübergreifende Besitzverkettung ist eine Erweiterung der Besitzverkettung, die datenbankübergreifend gültig ist. Mit dieser Regel wird überprüft, ob diese Option für alle Datenbanken mit Ausnahme von `master`, `msdb` und `tempdb` deaktiviert ist. Für `master`, `msdb` und `tempdb` ist die datenbankübergreifende Besitzverkettung standardmäßig aktiviert.        |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1043     |Der Gastprinzipal darf keinen Zugriff auf Benutzerdatenbanken besitzen.          |Medium         |Gastbenutzer dürfen mit beliebigen Anmeldenamen, die keinem bestimmten Datenbankbenutzer zugeordnet sind, auf eine Datenbank zugreifen. Mit dieser Regel wird sichergestellt, dass der Gastbenutzer keine Verbindung mit einer Datenbank herstellen kann.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz        |
|VA1046     |„CHECK_POLICY“ muss für alle SQL-Anmeldungen aktiviert werden.          |Niedrig         |Mithilfe der Option „CHECK_POLICY“ können SQL-Anmeldungen anhand der Domänenrichtlinie überprüft werden. Mit dieser Regel wird überprüft, ob die Option „CHECK_POLICY“ für alle SQL-Anmeldungen aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1047     |Die Überprüfung für den Ablauf von Kennwörtern muss für alle SQL-Anmeldungen aktiviert werden.          |Niedrig         |Richtlinien zum Ablauf von Kennwörtern werden verwendet, um die Lebensdauer von Kennwörtern zu verwalten. Wenn SQL Server die Richtlinie zum Ablauf von Kennwörtern erzwingt, werden Benutzer daran erinnert, alte Kennwörter zu ändern. Konten mit abgelaufenen Kennwörtern werden deaktiviert. Mit dieser Regel wird überprüft, ob die Richtlinie zum Ablauf von Kennwörtern für alle SQL-Anmeldungen aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1048     |Datenbankprinzipale dürfen nicht dem `sa`-Konto zugeordnet werden.          |High         |Ein Datenbankprinzipal, der dem `sa`-Konto zugeordnet ist, kann von einem Angreifer ausgenutzt werden, um die Berechtigungen auf `sysadmin` zu erhöhen.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1052     |„VORDEFINIERT\Administratoren“ muss als Serveranmeldename entfernt werden.          |Niedrig         |Die Gruppe „VORDEFINIERT\Administratoren“ enthält die Gruppe der lokalen Windows-Administratoren. In älteren Versionen von Microsoft SQL Server verfügt diese Gruppe standardmäßig über Administratorrechte. Mit dieser Regel wird überprüft, ob diese Gruppe aus SQL Server entfernt wurde.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1053     |Ein Konto mit dem Standardnamen `sa` muss umbenannt oder deaktiviert werden.          |Niedrig         |`sa` ist ein bekanntes Konto mit Prinzipal-ID 1. Mit dieser Regel wird überprüft, ob das `sa`-Konto umbenannt oder deaktiviert wurde.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1054     |Die Rolle „public“ darf nicht über übermäßige Berechtigungen für Objekte oder Spalten verfügen.          |Niedrig         |Jede SQL Server-Anmeldung gehört der Serverrolle „public“ an. Werden einem Serverprinzipal keine bestimmten Berechtigungen für ein sicherungsfähiges Objekt erteilt oder verweigert, erbt der Benutzer die Berechtigungen, die der Rolle „public“ für dieses Objekt erteilt wurden. Mit dieser Regel wird eine Liste aller sicherungsfähigen Objekte oder Spalten angezeigt, auf die alle Benutzer über die Rolle „public“ zugreifen können.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>SQL-Datenbank         |
|VA1058     |Der Anmeldename `sa` muss deaktiviert werden.          |High         |`sa` ist ein bekanntes Konto mit Prinzipal-ID 1. Mit dieser Regel wird überprüft, ob das `sa`-Konto deaktiviert wurde.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1059     |„xp_cmdshell“ muss deaktiviert werden.          |High         |„xp_cmdshell“ erzeugt eine Windows-Befehlsshell und übergibt eine Zeichenfolge für die Ausführung. Mit dieser Regel wird überprüft, ob „xp_cmdshell“ deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1067     |Erweiterte gespeicherte Prozeduren für Datenbank-E-Mail sollten bei Nichtverwendung deaktiviert sein          |Mittel         |Mit dieser Regel wird überprüft, ob Datenbank-E-Mail deaktiviert ist, wenn kein Datenbank-E-Mail-Profil konfiguriert ist. Datenbank-E-Mail kann zum Senden von E-Mail-Nachrichten von der SQL Server-Datenbank-Engine verwendet werden und ist standardmäßig deaktiviert. Wenn Sie diese Funktion nicht verwenden, sollten Sie sie deaktivieren, um die Angriffsfläche zu reduzieren.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1068     |Prinzipalen dürfen Serverberechtigungen nicht direkt erteilt werden.          |Niedrig         |Berechtigungen auf Serverebene werden einem Objekt auf Serverebene zugeordnet, um zu bestimmen, welche Benutzer auf das Objekt zugreifen können. Mit dieser Regel wird sichergestellt, dass keinen Anmeldungen Berechtigungen auf Serverebene direkt erteilt wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1070     |Datenbankbenutzer dürfen nicht denselben Namen verwenden wie zur Serveranmeldung.          |Niedrig         |Datenbankbenutzer dürfen denselben Namen verwenden wie zur Serveranmeldung. Mit dieser Regel wird sichergestellt, dass keine solchen Benutzer vorhanden sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1072     |Der Authentifizierungsmodus muss auf Windows-Authentifizierung festgelegt sein.          |Medium         |Es gibt zwei Möglichkeiten zur Authentifizierung: den Windows-Authentifizierungsmodus und den gemischten Modus. Im gemischten Modus ermöglicht SQL Server sowohl die Windows-Authentifizierung als auch die SQL Server-Authentifizierung. Mit dieser Regel wird überprüft, ob der Authentifizierungsmodus auf Windows-Authentifizierung festgelegt ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1094     |Prinzipalen dürfen Datenberechtigungen nicht direkt erteilt werden.          |Niedrig         |Berechtigungen sind Regeln, die einem sicherungsfähigen Objekt zugeordnet werden, um zu bestimmen, welche Benutzer auf das Objekt zugreifen können. Mit dieser Regel wird sichergestellt, dass Benutzern Datenbankberechtigungen nicht direkt erteilt wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1095     |Die Rolle „public“ darf nicht über übermäßige Berechtigungen verfügen.          |Medium         |Jede SQL Server-Anmeldung gehört der Serverrolle „public“ an. Werden einem Serverprinzipal keine bestimmten Berechtigungen für ein sicherungsfähiges Objekt erteilt oder verweigert, erbt der Benutzer die Berechtigungen, die der Rolle „public“ für dieses Objekt erteilt wurden. Dadurch wird eine Liste aller Berechtigungen angezeigt, die der Rolle „public“ erteilt wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank         |
|VA1096     |Gastprinzipalen dürfen keine Berechtigungen in der Datenbank erteilt werden.          |Niedrig         |Jede Datenbank enthält einen Benutzer mit dem Namen „Gast“. Dem Gastbenutzer erteilte Berechtigungen werden an Benutzer vererbt, die Zugriff auf die Datenbank, jedoch kein Benutzerkonto in der Datenbank besitzen. Mit dieser Regel wird sichergestellt, dass alle Berechtigungen für den Gastbenutzer widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank         |
|VA1097     |Gastprinzipalen dürfen keine Berechtigungen für Objekte oder Spalten erteilt werden.          |Niedrig         |Jede Datenbank enthält einen Benutzer mit dem Namen „Gast“. Dem Gastbenutzer erteilte Berechtigungen werden an Benutzer vererbt, die Zugriff auf die Datenbank, jedoch kein Benutzerkonto in der Datenbank besitzen. Mit dieser Regel wird sichergestellt, dass alle Berechtigungen für den Gastbenutzer widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank         |
|VA1099     |Gastbenutzern dürfen keine Berechtigungen für sicherungsfähige Elemente in der Datenbank erteilt werden.          |Niedrig         |Jede Datenbank enthält einen Benutzer mit dem Namen „Gast“. Dem Gastbenutzer erteilte Berechtigungen werden an Benutzer vererbt, die Zugriff auf die Datenbank, jedoch kein Benutzerkonto in der Datenbank besitzen. Mit dieser Regel wird sichergestellt, dass alle Berechtigungen für den Gastbenutzer widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank         |
|VA1246     |Es dürfen keine Anwendungsrollen verwendet werden.          |Niedrig         |Eine Anwendungsrolle ist ein Datenbankprinzipal, mit dem eine Anwendung mit eigenen Berechtigungen ausgeführt werden kann, die Benutzerberechtigungen ähnlich sind. Über Anwendungsrollen kann der Zugriff auf bestimmte Daten auf Benutzer beschränkt werden, die mithilfe einer bestimmten Anwendung eine Verbindung herstellen. Anwendungsrollen basieren auf Kennwörtern (die in der Regel von der Anwendung hartcodiert werden) und nicht auf Berechtigungen. Wurde das Kennwort erraten, kann für die Datenbank ein Identitätswechsel der Anwendungsrolle nötig werden. Mit dieser Regel wird sichergestellt, dass in der Datenbank keine Anwendungsrollen definiert sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank         |
|VA1248     |Benutzerdefinierten Datenbankrollen dürfen keinen festen Rollen angehören.          |Medium         |Zur einfachen Verwaltung der Berechtigungen für Ihre Datenbanken stellt SQL Server mehrere Rollen zur Verfügung. Dabei handelt es sich um Sicherheitsprinzipale, die andere Prinzipale gruppieren. Sie entsprechen den Gruppen im Microsoft Windows-Betriebssystem. Datenbankkonten und andere SQL Server-Rollen können Rollen auf Datenbankebene hinzugefügt werden. Jedes Mitglied einer festen Datenbankrolle kann der betreffenden Rolle weitere Benutzer hinzufügen. Mit dieser Regel wird sichergestellt, dass benutzerdefinierte Rollen keinen festen Rollen angehören.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1267     |Eigenständige Benutzer müssen die Windows-Authentifizierung verwenden.          |Medium         |Eigenständige Benutzer sind Benutzer, die in der Datenbank vorhanden sind und für die keine Anmeldenamenzuordnung erforderlich ist. Mit dieser Regel wird überprüft, ob eigenständige Benutzer die Windows-Authentifizierung verwenden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1280     |Der Rolle „public“ erteilte Serverberechtigungen müssen minimiert werden.          |Medium         |Jede SQL Server-Anmeldung gehört der Serverrolle „public“ an. Werden einem Serverprinzipal keine bestimmten Berechtigungen für ein sicherungsfähiges Objekt erteilt oder verweigert, erbt der Benutzer die Berechtigungen, die der Rolle „public“ für dieses Objekt erteilt wurden. Mit dieser Regel wird überprüft, ob der Rolle „public“ erteilte Serverberechtigungen minimiert sind.          |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1282     |Verwaiste Rollen müssen entfernt werden.          |Niedrig         |Unter „verwaisten Rollen“ versteht man benutzerdefinierte Rollen ohne Mitglieder. Entfernen Sie verwaiste Rollen, da sie für das System nicht erforderlich sind. Mit dieser Regel wird überprüft, ob verwaiste Rollen vorhanden sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2020     |ALTER- oder ALTER ANY USER-Berechtigungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.          |High         |Jedem sicherungsfähigen SQL Server-Element werden Berechtigungen zugeordnet, die Prinzipalen erteilt werden können. Berechtigungen können für den Gültigkeitsbereich der Serverebene (Anmeldeinformationen und Serverrollen) sowie der Datenbankebene (Datenbankbenutzer und Datenbankrollen) erteilt werden. Mit diesen Regeln wird sichergestellt, dass nur einer minimalen Gruppe von Prinzipalen ALTER- oder ALTER ANY USER-Berechtigungen im Gültigkeitsbereich der Datenbank erteilt werden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2033     |EXECUTE-Berechtigungen für Objekte oder Spalten im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.          |Niedrig         |Mit dieser Regel wird überprüft, welchen Prinzipalen die EXECUTE-Berechtigung für Objekte oder Spalten erteilt wird, um sicherzustellen, dass diese Berechtigung einer minimalen Gruppe von Prinzipalen erteilt wird. Jedem sicherungsfähigen SQL Server-Element werden Berechtigungen zugeordnet, die Prinzipalen erteilt werden können. Berechtigungen können für den Gültigkeitsbereich der Serverebene (Anmeldeinformationen und Serverrollen) oder der Datenbankebene (Datenbankbenutzer, Datenbankrollen oder Anwendungsrollen) erteilt werden. Die EXECUTE-Berechtigung gilt sowohl für gespeicherte Prozeduren als auch für Skalarfunktionen, die in berechneten Spalten verwendet werden können.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2103     |Unnötige Ausführungsberechtigungen für erweiterte gespeicherte Prozeduren müssen widerrufen werden.          |Medium         |Erweiterte gespeicherte Prozeduren sind DLLs (Dynamic Link Libraries), die von einer SQL Server-Instanz dynamisch geladen und ausgeführt werden können. SQL Server wird mit einer Vielzahl von erweiterten gespeicherten Prozeduren für die Interaktion mit System-DLLs bereitgestellt. Mit dieser Regel wird überprüft, ob unnötige Ausführungsberechtigungen für erweiterte gespeicherte Prozeduren widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2107     |Nur eine minimale Gruppe von Prinzipalen darf Mitglied von festen Azure SQL-Masterdatenbankrollen sein.          |High         |SQL-Datenbank stellt zwei eingeschränkte Administratorrollen in der Masterdatenbank bereit, denen Benutzerkonten hinzugefügt werden können, um Berechtigungen zum Erstellen von Datenbanken oder Verwalten von Anmeldungen zu gewähren. Mit dieser Regel wird sichergestellt, dass nur eine minimale Gruppe von Prinzipalen Mitglied dieser Administratorrollen ist.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2108     |Nur eine minimale Gruppe von Prinzipalen darf Mitglied von festen Datenbankrollen mit großen Auswirkungen sein.          |High         |SQL Server stellt Rollen zur Verwaltung von Berechtigungen bereit. Bei Rollen handelt es sich um Sicherheitsprinzipale, die andere Prinzipale gruppieren. Die Berechtigungen von Rollen auf Datenbankebene gelten für die gesamte Datenbank. Mit dieser Regel wird sichergestellt, dass nur eine minimale Gruppe von Prinzipalen Mitglied der festen Datenbankrollen ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2109     |Nur eine minimale Gruppe von Prinzipalen darf Mitglied von festen Datenbankrollen mit geringen Auswirkungen sein.          |Niedrig         |SQL Server stellt Rollen zur Verwaltung von Berechtigungen bereit. Bei Rollen handelt es sich um Sicherheitsprinzipale, die andere Prinzipale gruppieren. Die Berechtigungen von Rollen auf Datenbankebene gelten für die gesamte Datenbank. Mit dieser Regel wird sichergestellt, dass nur eine minimale Gruppe von Prinzipalen Mitglied der festen Datenbankrollen ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2110     |Ausführungsberechtigungen für den Zugriff auf die Registrierung müssen widerrufen werden.          |High         |Mithilfe von erweiterten gespeicherten Prozeduren für die Registrierung kann Microsoft SQL Server Werte und Schlüssel in der Registrierung lesen, schreiben und aufzählen. Sie werden von Enterprise Manager zur Konfiguration des Servers verwendet. Mit dieser Regel wird sichergestellt, dass die Berechtigungen zur Ausführung von erweiterten gespeicherten Prozeduren für die Registrierung für alle Benutzer (mit Ausnahme von DBO) widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2113     |DTS-Berechtigungen (Data Transformation Services) dürfen nur SSIS-Rollen erteilt werden.          |Medium         |Data Transformation Services (DTS) umfasst Objekte und Hilfsprogramme, mit denen ETL-Vorgänge (Extrahieren, Transformieren und Laden) in oder aus einer Datenbank automatisiert werden können. Bei den Objekten handelt es sich um DTS-Pakete und ihre Komponenten. Die Hilfsprogramme werden DTS-Tools genannt. Mit dieser Regel wird überprüft, ob nur den SSIS-Rollen Berechtigungen zur Verwendung der gespeicherten DTS-Systemprozeduren gewährt werden und ob die Berechtigungen für die PUBLIC-Rolle zur Verwendung der gespeicherten DTS-Systemprozeduren widerrufen wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2114     |Nur eine minimale Gruppe von Prinzipalen darf Mitglied von festen Serverrollen mit großen Auswirkungen sein.          |High         |SQL Server stellt Rollen zur Verwaltung von Berechtigungen bereit. Bei Rollen handelt es sich um Sicherheitsprinzipale, die andere Prinzipale gruppieren. Die Berechtigungen von Rollen auf Serverebene gelten für den gesamten Server. Mit dieser Regel wird sichergestellt, dass nur eine minimale Gruppe von Prinzipalen Mitglied der festen Serverrollen ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2129     |Änderungen an signierten Modulen müssen autorisiert werden.          |High         |Sie können gespeicherte Prozeduren, Funktionen oder Trigger mit einem Zertifikat oder einem asymmetrischen Schlüssel signieren. Diese Vorgehensweise wurde für Szenarios konzipiert, in denen Berechtigungen nicht über Besitzverkettung vererbt werden können oder wenn die Besitzkette unterbrochen ist, wie bei dynamischem SQL. Mit dieser Regel wird überprüft, ob Änderungen an signierten Modulen vorgenommen wurden. Dies könnte auf eine missbräuchliche Nutzung hinweisen.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>SQL-Datenbank<br/><br/>Verwaltete SQL-Instanz         |
|VA2130     |Alle Benutzer mit Zugriff auf die Datenbank müssen nachverfolgt werden.          |Low (Niedrig)         |Mit dieser Regel werden alle Benutzer mit Zugriff auf eine Datenbank verfolgt. Stellen Sie sicher, dass diese Benutzer gemäß ihrer aktuellen Rolle in der Organisation autorisiert sind.         |<nobr>SQL-Datenbank<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>Überwachung und Protokollierung

|Regel-ID  |Titel der Regel  |Schweregrad der Regel  |Beschreibung der Regel  |Plattform  |
|---------|---------|---------|---------|---------|
|VA1045     |Die Standardablaufverfolgung muss aktiviert werden.          |Medium         |Die Standardablaufverfolgung vereinfacht Datenbankadministratoren die Problembehandlung, indem die für die Diagnose von erstmalig auftretenden Problemen erforderlichen Protokolldaten zur Verfügung gestellt werden. Mit dieser Regel wird überprüft, ob die Standardablaufverfolgung aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1091     |Die Überwachung von erfolgreichen und fehlgeschlagenen Anmeldeversuchen (Standardablaufverfolgung) muss aktiviert sein, wenn die Option „Anmeldungsüberwachung“ auf die Nachverfolgung von Anmeldungen festgelegt ist.          |Niedrig         |Mit der Konfiguration zur Überwachung von SQL Server-Anmeldungen können Administratoren Benutzer nachverfolgen, die sich bei SQL Server-Instanzen anmelden. Entscheidet sich der Benutzer für die „Anmeldungsüberwachung“ zur Nachverfolgung von Benutzern, die sich bei SQL Server-Instanzen anmelden, muss die Option sowohl für erfolgreiche als auch für fehlgeschlagene Anmeldeversuche aktiviert werden.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1093     |Die maximale Anzahl von Fehlerprotokollen sollte mindestens zwölf betragen.          |Niedrig         |Jedes SQL Server-Fehlerprotokoll enthält alle Informationen zu Fehlern, die seit dem letzten Neustart von SQL Server oder seit der letzten Wiederverwendung der Fehlerprotokolle aufgetreten sind. Mit dieser Regel wird überprüft, ob die maximale Anzahl von Fehlerprotokollen mindestens zwölf beträgt.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1258     |Es sind nur die definierten Datenbankbesitzer vorhanden.          |High         |Datenbankbesitzer können alle Aktivitäten zur Konfiguration und Wartung an der Datenbank ausführen und auch Datenbanken in SQL Server löschen. Durch die Nachverfolgung von Datenbankbesitzern kann vermieden werden, dass einige Prinzipale über übermäßige Berechtigungen verfügen. Erstellen Sie eine Baseline, in der die erwarteten Datenbankbesitzer für die Datenbank definiert werden. Mit dieser Regel wird überprüft, ob die Datenbankbesitzer den in der Baseline definierten Datenbankbesitzern entsprechen.         |<nobr>ab SQL Server 2016<sup>3</sup><nobr/><br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1264     |Es muss die Überwachung für sowohl erfolgreiche als auch fehlgeschlagene Anmeldeversuche aktiviert werden.          |Niedrig         |Durch die Konfiguration der SQL Server-Überwachung können Administratoren Benutzer nachverfolgen, die sich bei SQL Server-Instanzen in ihrem Verantwortungsbereich anmelden. Mit dieser Regel wird überprüft, ob die Überwachung sowohl für erfolgreiche als auch für fehlgeschlagene Anmeldeversuche aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1265     |Es muss die Überwachung für sowohl erfolgreiche als auch fehlgeschlagene Anmeldeversuche bei der Authentifizierung von eigenständigen Datenbankbenutzern aktiviert werden.          |Medium         |Durch die Konfiguration der SQL Server-Überwachung können Administratoren Benutzer nachverfolgen, die sich bei SQL Server-Instanzen in ihrem Verantwortungsbereich anmelden. Mit dieser Regel wird überprüft, ob die Überwachung sowohl für erfolgreiche als auch für fehlgeschlagene Anmeldeversuche bei der Authentifizierung von eigenständigen Datenbankbenutzern aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1281     |Alle Mitgliedschaften für benutzerdefinierte Rollen müssen auch beabsichtigt sein.          |Medium         |Bei benutzerdefinierten Rollen handelt es sich um Sicherheitsprinzipale, die vom Benutzer zum Gruppieren von Prinzipalen definiert werden, um Berechtigungen leicht zu verwalten. Zur Vermeidung von übermäßigen Berechtigungen müssen diese Rollen überwacht werden. Erstellen Sie eine Baseline, in der die erwarteten Mitglieder für jede benutzerdefinierte Rolle definiert sind. Mit dieser Regel wird überprüft, ob die Mitgliedschaften für benutzerdefinierte Rollen mit den in der Baseline definierten Mitgliedern übereinstimmen.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1283     |Im System muss mindestens eine aktive Überwachung vorhanden sein.          |Niedrig         |Die Überprüfung einer Instanz der SQL Server-Datenbank-Engine oder einer einzelnen Datenbank umfasst das Nachverfolgen und Protokollieren von Ereignissen, die in der Datenbank-Engine auftreten. Das SQL Server-Überwachungsobjekt erfasst eine einzelne Instanz von Aktionen und Aktionsgruppen auf Server- oder Datenbankebene auf, die überwacht werden soll. Mit dieser Regel wird überprüft, ob im System mindestens eine aktive Überwachung vorhanden ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2061     |Die Überwachung muss auf der Serverebene aktiviert werden.          |High         |Die Überwachung von Azure SQL-Datenbank verfolgt Datenbankereignisse und schreibt sie in ein Überwachungsprotokoll in Ihrem Azure-Speicherkonto. Die Überwachung kann Ihnen dabei helfen, die Datenbankaktivität zu verstehen, Einblicke in Abweichungen und Anomalien zu erhalten, die auf Probleme im Unternehmen oder mutmaßliche Sicherheitsverstöße hinweisen können, sowie gesetzliche Bestimmungen einzuhalten. Weitere Informationen finden Sie unter [Azure SQL-Überwachung](./auditing-overview.md). Mit dieser Regel wird überprüft, ob die Überwachung aktiviert ist.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>Datenschutz

|Regel-ID  |Titel der Regel  |Schweregrad der Regel  |Beschreibung der Regel  |Plattform  |
|---------|---------|---------|---------|---------|
|VA1098     |Für alle vorhandenen SSB- oder Spiegelungsendpunkte muss eine AES-Verbindung erforderlich sein.          |High         |Service Broker- und Spiegelungsendpunkte unterstützen verschiedene Verschlüsselungsalgorithmen, einschließlich der Möglichkeit, dass keine Verschlüsselung stattfindet. Mit dieser Regel wird überprüft, ob für alle vorhandenen Endpunkte die AES-Verschlüsselung erforderlich ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1219     |Die transparente Datenverschlüsselung muss aktiviert sein.          |Mittel         |Die transparente Datenverschlüsselung (Transparent Data Encryption, TDE) trägt zum Schutz der Datenbankdateien vor der Veröffentlichung von Informationen bei. Hierzu werden die Datenbank, die dazugehörigen Sicherungen und die Transaktionsprotokolldateien im Ruhezustand in Echtzeit ver- und entschlüsselt, ohne dass die Anwendung geändert werden muss. Mit dieser Regel wird überprüft, ob TDE für die Datenbank aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1220     |Die Datenbankkommunikation über TDS muss durch TLS geschützt sein.          |High         |Microsoft SQL Server kann Daten, die über ein Netzwerk zwischen einer SQL Server-Instanz und einer Clientanwendung übertragen werden, mithilfe von Secure Sockets Layer (SSL) oder Transport Layer Security (TLS) verschlüsseln. Mit dieser Regel wird überprüft, ob alle Verbindungen mit der SQL Server-Instanz über TLS verschlüsselt werden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1221     |Symmetrische Schlüssel für die Datenbankverschlüsselung müssen den AES-Algorithmus verwenden.          |High         |SQL Server verwendet Verschlüsselungsschlüssel, um Anmeldeinformationen und Verbindungsinformationen zu schützen, die in einer Serverdatenbank gespeichert werden. SQL Server besitzt zwei Arten von Schlüsseln: symmetrische und asymmetrische. Mit dieser Regel wird überprüft, ob die symmetrischen Schlüssel für die Datenbankverschlüsselung den AES-Algorithmus verwenden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1222     |Verschlüsselungsschlüssel auf Zellenebene müssen den AES-Algorithmus verwenden.          |High         |Mit der Verschlüsselung auf Zellenebene können Sie Ihre Daten mithilfe von symmetrischen und asymmetrischen Schlüsseln verschlüsseln. Mit dieser Regel wird überprüft, ob die symmetrischen Schlüssel für die Verschlüsselung auf Zellenebene den AES-Algorithmus verwenden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1223     |Zertifikatschlüssel müssen eine Schlüssellänge von mindestens 2.048 Bits verwenden.          |High         |Zertifikatschlüssel werden in RSA und anderen Verschlüsselungsalgorithmen zum Schutz von Daten verwendet. Diese Schlüssel müssen ausreichend lang sein, um den Schutz der Benutzerdaten zu gewährleisten. Mit dieser Regel wird überprüft, ob die Schlüssellänge für alle Zertifikate mindestens 2.048 Bits beträgt.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1224     |Die Länge der asymmetrischen Schlüssel muss mindestens 2.048 Bits betragen.          |High         |Asymmetrische Datenbankschlüssel werden in vielen Verschlüsselungsalgorithmen verwendet. Sie müssen ausreichend lang sein, um die verschlüsselten Daten effektiv zu schützen. Mit dieser Regel wird überprüft, ob alle in der Datenbank gespeicherten asymmetrischen Schlüssel mindestens 2.048 Bits lang sind.         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>SQL-Datenbank         |
|VA1279     |Die Option zum Erzwingen der Verschlüsselung muss für TDS aktiviert werden.          |High         |Ist die Option „Verschlüsselung erzwingen“ für die Datenbank-Engine aktiviert, wird jegliche Kommunikation zwischen Client und Server verschlüsselt – unabhängig davon, ob das Kontrollkästchen für die Option „Verschlüsselung erzwingen“ (etwa über SSMS) aktiviert ist. Mit dieser Regel wird überprüft, ob die Option „Verschlüsselung erzwingen“ aktiviert ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1288     |Spalten mit vertraulichen Daten müssen klassifiziert werden.          |Mittel         |Mit dieser Regel wird überprüft, ob die überprüfte Datenbank potenziell vertrauliche Daten aufweist, die nicht klassifiziert wurden.         |<nobr/>SQL-Datenbank         |
|VA2060     |Die SQL-Bedrohungserkennung muss auf der Serverebene aktiviert werden.          |Medium         |Die SQL-Bedrohungserkennung bietet eine Sicherheitsebene, die potenzielle Sicherheitslücken und anomale Aktivitäten in Datenbanken, wie z. B. Angriffe durch Einschleusung von SQL-Befehlen und ungewöhnliche Verhaltensmuster, erkennt. Wird eine potenzielle Bedrohung erkannt, sendet die Bedrohungserkennung (Threat Detection) eine nützliche Echtzeitwarnung per E-Mail auch an Microsoft Defender für Cloud mit eindeutigen Schritten zur Untersuchung und Problembehandlung für die jeweilige Bedrohung. Weitere Informationen finden Sie unter [Konfigurieren der Bedrohungserkennung](./threat-detection-configure.md). Mit dieser Regel wird überprüft, ob die SQL-Bedrohungserkennung aktiviert ist.         |<nobr/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>Installationsupdates und Patches

|Regel-ID  |Titel der Regel  |Schweregrad der Regel  |Beschreibung der Regel  |Plattform  |
|---------|---------|---------|---------|---------|
| VA1018     |Die neuesten Updates müssen installiert werden.          |High         |Microsoft veröffentlicht in regelmäßigen Abständen kumulative Updates für alle Versionen von SQL Server. Mit dieser Regel wird überprüft, ob das neueste kumulative Update für die verwendete SQL Server-Version installiert wurde, indem eine Zeichenfolge für die Ausführung übergeben wird. Mit dieser Regel wird sichergestellt, dass kein Benutzer (mit Ausnahme von DBO) über die Berechtigung zum Ausführen der erweiterten gespeicherten Prozedur „xp_cmdshell“ verfügt. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA2128     |Die Sicherheitsrisikobewertung wird für SQL Server-Versionen, die älter als SQL Server 2012 sind, nicht unterstützt.          |High         |Für eine Überprüfung der Sicherheitsrisikobewertung auf Ihrer SQL Server-Instanz muss der Server auf SQL Server 2012 oder höher aktualisiert werden. SQL Server 2008 R2 und ältere Versionen werden von Microsoft nicht mehr unterstützt. Weitere Informationen finden Sie unter <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>Oberflächenverringerung

|Regel-ID  |Titel der Regel  |Schweregrad der Regel  |Beschreibung der Regel  |Plattform  |
|---------|---------|---------|---------|---------|
|VA1022     |Verteilte Ad-hoc-Abfragen müssen deaktiviert werden.          |Medium         |Verteilte Ad-hoc-Abfragen verwenden die Funktionen `OPENROWSET` und `OPENDATASOURCE`, um eine Verbindung mit Remotedatenquellen herzustellen, die OLE DB verwenden. Mit dieser Regel wird überprüft, ob verteilte Ad-hoc-Abfragen deaktiviert sind.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1023     |CLR muss deaktiviert werden.          |High         |Mit CLR kann verwalteter Code von der Microsoft SQL Server-Umgebung gehostet und darin ausgeführt werden. Mit dieser Regel wird überprüft, ob CLR deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1026     |CLR muss deaktiviert werden.          |Medium         |Mit CLR kann verwalteter Code von der Microsoft SQL Server-Umgebung gehostet und darin ausgeführt werden. SAFE- und EXTERNAL_ACCESS-Assemblys werden von CLR Strict Security so behandelt, als ob sie mit „UNSAFE“ gekennzeichnet wären. Alle Assemblys müssen durch ein Zertifikat oder einen asymmetrischen Schlüssel mit einem entsprechenden Anmeldenamen signiert werden, der über die Berechtigung „UNSAFE ASSEMBLY“ für die Masterdatenbank verfügt. Mit dieser Regel wird überprüft, ob CLR deaktiviert ist.         |<nobr>ab SQL Server 2017<sup>2</sup><nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1027     |Nicht verfolgte vertrauenswürdige Assemblys müssen entfernt werden.          |High         |Als „UNSAFE“ markierte Assemblys müssen durch ein Zertifikat oder einen asymmetrischen Schlüssel mit einem entsprechenden Anmeldenamen signiert werden, der über die Berechtigung „UNSAFE ASSEMBLY“ für die Masterdatenbank verfügt. Vertrauenswürdige Assemblys können diese Anforderung umgehen.          |<nobr>ab SQL Server 2017<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1044     |Sofern nicht ausdrücklich erforderlich, sollten Remoteadministratorverbindungen deaktiviert sein          |Mittel         |Mit dieser Regel wird überprüft, ob dedizierte Remoteadministratorverbindungen deaktiviert sind, wenn sie nicht für das Clustering verwendet werden, um die Angriffsfläche zu reduzieren. SQL Server stellt eine dedizierte Administratorverbindung (Dedicated Administrator Connection, DAC) bereit. Über die DAC kann ein Administrator auf einen aktuell ausgeführten Server zugreifen, um Diagnosefunktionen oder Transact-SQL-Anweisungen auszuführen oder um Probleme auf dem Server zu beheben. Bei Remoteaktivierung wird sie zu einem attraktiven Ziel für Angriffe.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1051     |„AUTO_CLOSE“ muss für alle Datenbanken deaktiviert werden.          |Mittel         |Mit der Option „AUTO_CLOSE“ wird angegeben, ob die Datenbank ordnungsgemäß heruntergefahren wird und Ressourcen freigegeben werden, nachdem der letzte Benutzer die Verbindung getrennt hat. Ungeachtet der Vorteilen kann dies zu einem Denial-of-Service-Angriff führen, indem die Datenbank aggressiv geöffnet und geschlossen wird. Daher ist es wichtig, diese Funktion deaktiviert zu lassen. Mit dieser Regel wird überprüft, ob diese Option für die aktuelle Datenbank deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1066     |Nicht verwendete Service Broker-Endpunkte müssen entfernt werden.          |Niedrig         |Service Broker stellt Warteschlangen und zuverlässiges Messaging für SQL Server bereit. Service Broker wird für Anwendungen verwendet, die eine einzige SQL Server-Instanz verwenden, sowie für Anwendungen, die die Arbeitslast auf mehrere Instanzen verteilen. Service Broker-Endpunkte stellen Optionen für die Transportsicherheit und Nachrichtenweiterleitung bereit. Mit dieser Regel werden alle Service Broker-Endpunkte aufgelistet. Entfernen Sie nicht verwendete Service Broker-Endpunkte.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1071     |Die Option „Gespeicherte Startprozeduren suchen“ muss deaktiviert werden.          |Medium         |Ist die Option „Startprozeduren suchen“ aktiviert, sucht SQL Server alle gespeicherten Prozeduren, für die eine automatische Ausführung auf dem Server definiert ist, und führt diese aus. Ist diese Option aktiviert, sucht SQL Server alle gespeicherten Prozeduren, für die eine automatische Ausführung auf dem Server definiert ist, und führt diese aus. Mit dieser Regel wird überprüft, ob diese Option deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1092     |Die SQL Server-Instanz darf nicht durch den SQL Server-Browserdienst angekündigt werden.          |Niedrig         |SQL Server verwendet den SQL Server-Browserdienst zum Auflisten der Datenbank-Engine-Instanzen, die auf dem Computer installiert sind. Auf diese Weise können Clientanwendungen nach einem Server suchen, und Clients wird die Unterscheidung zwischen mehreren Datenbank-Engine-Instanzen auf demselben Computer vereinfacht. Mit dieser Regel wird überprüft, ob die SQL-Instanz verborgen ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1102     |Das Bit für die Kennzeichnung von Datenbanken als vertrauenswürdig muss für alle Datenbanken mit Ausnahme von MSDB deaktiviert werden.          |High         |Mit der Datenbankeigenschaft „TRUSTWORTHY“ wird angegeben, ob die SQL Server-Instanz die Datenbank und ihre Inhalte als vertrauenswürdig einstuft. Ist diese Option aktiviert, können Datenbankmodule (z. B. benutzerdefinierte Funktionen oder gespeicherte Prozeduren), die einen Identitätswechselkontext verwenden, auf Ressourcen außerhalb der Datenbank zugreifen. Mit dieser Regel wird überprüft, ob das Bit für die Kennzeichnung von Datenbanken als vertrauenswürdig für alle Datenbanken mit Ausnahme von MSDB deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1143     |Der Benutzer „DBO“ darf für normale Dienstvorgänge nicht verwendet werden.          |Medium         |Der DBO-Benutzer (oder Datenbankbesitzer) ist ein Benutzerkonto mit den impliziten Berechtigungen zur Ausführung aller Aktivitäten in der Datenbank. Mitglieder der festen Serverrolle „Systemadministrator“ werden automatisch dem DBO-Konto zugeordnet. Mit dieser Regel wird sichergestellt, dass der DBO-Benutzer nicht das einzige Konto mit Zugriff auf diese Datenbank darstellt. Beachten Sie, dass bei einer neu erstellten Datenbank diese Regel erst ausgeführt werden kann, wenn weitere Rollen erstellt wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz<br/><br/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA1144     |Nur der DBO-Benutzer darf auf die Modelldatenbank zugreifen.          |Medium         |Die Modelldatenbank wird als Vorlage für alle Datenbanken verwendet, die in einer SQL Server-Instanz erstellt werden. Änderungen an der Modelldatenbank, etwa am Wiederherstellungsmodell der Datenbankgröße und andere Datenbankoptionen, gelten für alle Datenbanken, die später erstellt werden. Mit dieser Regel wird sichergestellt, dass der DBO-Benutzer das einzige Konto mit Zugriff auf die Modelldatenbank darstellt.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1230     |Die Option „Filestream“ muss deaktiviert werden.          |Hoch         |Mit „FILESTREAM“ wird die SQL Server-Datenbank-Engine mit einem NTFS-Dateisystem integriert, indem Blobdaten (Binary Large Object) vom Typ „varbinary(max)“ als Dateien im Dateisystem gespeichert werden. Mit Transact-SQL-Anweisungen können FILESTREAM-Daten eingefügt, aktualisiert, abgefragt, gesucht und gesichert werden. Die Aktivierung von „Filestream“ in SQL Server macht die zusätzliche NTFS-Streaming-API verfügbar, wodurch die Angriffsfläche vergrößert und die Anfälligkeit für böswillige Angriffe erhöht wird. Mit dieser Regel wird überprüft, ob die Option „Filestream“ deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1235     |Die Serverkonfiguration „Replication XPs“ muss deaktiviert werden.          |Mittel         |Deaktivieren Sie die veraltete Serverkonfiguration „Replication XPs“, um die Angriffsfläche zu reduzieren. Dies ist eine rein interne Konfigurationseinstellung.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1244     |Verwaiste Benutzer müssen aus SQL Server-Datenbanken entfernt werden.          |Medium         |Ein „verwaister Benutzer“ ist ein Benutzer, der in einer Datenbank vorhanden ist, aber über keinen entsprechenden Anmeldenamen in der Masterdatenbank oder als externe Ressource (z. B. Windows-Benutzer) verfügt. Ein verwaister Benutzer sollte entweder entfernt oder einem gültigen Anmeldenamen neu zugeordnet werden. Mit dieser Regel wird sichergestellt, dass keine verwaisten Benutzer vorhanden sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1245     |Die DBO-Informationen in der Ziel- und der Masterdatenbank müssen konsistent sein.          |High         |Informationen zur DBO-Identität für eine Datenbank können redundant sein: Metadaten werden in der Datenbank selbst gespeichert sowie in der Masterdatenbank. Mit dieser Regel wird überprüft, ob diese Informationen in der Ziel- und Masterdatenbank konsistent sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1247     |Es dürfen keine gespeicherte Prozeduren vorhanden sein, die automatisch starten.          |High         |Wurde SQL Server für die Option „Startprozeduren suchen“ konfiguriert, sucht der Server in der Masterdatenbank nach gespeicherten Prozeduren, die mit „Automatischer Start“ gekennzeichnet sind. Mit dieser Regel wird sichergestellt, dass keine gespeicherten Prozeduren vorhanden sind, die automatisch starten.         |<nobr>ab SQL Server 2012<nobr/>         |
|VA1256     |Es dürfen keine CLR-Benutzerassemblys in der Datenbank definiert werden.          |High         |Mit CLR-Assemblys kann beliebiger Code für einen SQL Server-Vorgang ausgeführt werden. Mit dieser Regel wird sichergestellt, dass in der Datenbank keine benutzerdefinierten CLR-Assemblys vorhanden sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA1277     |Die PolyBase-Netzwerkverschlüsselung muss aktiviert werden.          |High         |PolyBase ist eine Technologie, die auf relationale und nicht relationale Daten innerhalb von SQL Server zugreift und diese Daten miteinander kombiniert. Mit der Option „PolyBase-Netzwerkverschlüsselung“ kann SQL Server für die Verschlüsselung von Steuerungs- und Datenkanälen bei der Verwendung von PolyBase konfiguriert werden. Mit dieser Regel wird überprüft, ob diese Option aktiviert ist.         |<nobr>ab SQL Server 2016<nobr/>         |
|VA1278     |Für Anbieter für die Verwaltung externer Schlüssel muss eine Baseline erstellt werden.          |Medium         |Über die erweiterbare Schlüsselverwaltung (Extensible Key Management, EKM) von SQL Server können EKM-/HSM-Drittanbieter (Hardwaresicherheitsmodule) ihre Module bei SQL Server registrieren. Wenn registrierte SQL Server-Benutzer die in EKM-Modulen gespeicherten Verschlüsselungsschlüssel verwenden können, wird mit dieser Regel eine Liste der im System verwendeten EKM-Anbieter angezeigt.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2062     |Firewallregeln auf Datenbankebene dürfen keinen übermäßigen Zugriff erteilen.          |High         |Die Azure SQL-Firewall auf Datenbankebene schützt Ihre Daten, indem jeglicher Zugriff auf Ihre Datenbank verhindert wird, außer durch IP-Adressen, denen Sie eine Zugriffsberechtigung erteilen. Firewallregeln auf Datenbankebene gewähren Zugriff auf eine bestimmte Datenbank basierend auf der Ursprungs-IP-Adresse der jeweiligen Anforderung. Firewallregeln auf Datenbankebene für Master- und Benutzerdatenbanken können nur über Transact-SQL erstellt und verwaltet werden (im Gegensatz zu Firewallregeln auf Serverebene, die auch über das Azure-Portal oder mit PowerShell erstellt und verwaltet werden können). Weitere Informationen finden Sie unter [IP-Firewallregeln für Azure SQL-Datenbank und Azure Synapse Analytics](./firewall-configure.md). Mit dieser Überprüfung wird sichergestellt, dass Firewallregeln auf Datenbankebene Zugriff für maximal 255 IP-Adressen erteilen.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2063     |Firewallregeln auf Serverebene dürfen keinen übermäßigen Zugriff erteilen.          |High         |Die Azure SQL-Firewall auf Serverebene schützt Ihren Server, indem jeglicher Zugriff auf Ihre Datenbanken verhindert wird, außer durch IP-Adressen, denen Sie eine Zugriffsberechtigung erteilen. Firewallregeln auf Serverebene gewähren Zugriff auf alle Datenbanken, die zum Server gehören, basierend auf der Ursprungs-IP-Adresse der jeweiligen Anforderung.  Firewallregeln auf Serverebene können nur über Transact-SQL sowie mithilfe des Azure-Portals und mit PowerShell erstellt und verwaltet werden. Weitere Informationen finden Sie unter [IP-Firewallregeln für Azure SQL-Datenbank und Azure Synapse Analytics](./firewall-configure.md). Mit dieser Regel wird sichergestellt, dass Firewallregeln auf Serverebene Zugriff für maximal 255 IP-Adressen erteilen.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2064     |Firewallregeln auf Datenbankebene müssen zumindest nachverfolgt und verwaltet werden.          |High         |Die Azure SQL-Firewall auf Datenbankebene schützt Ihre Daten, indem jeglicher Zugriff auf Ihre Datenbank verhindert wird, außer durch IP-Adressen, denen Sie eine Zugriffsberechtigung erteilen. Firewallregeln auf Datenbankebene gewähren Zugriff auf eine bestimmte Datenbank basierend auf der Ursprungs-IP-Adresse der jeweiligen Anforderung. Firewallregeln auf Datenbankebene für Master- und Benutzerdatenbanken können nur über Transact-SQL erstellt und verwaltet werden (im Gegensatz zu Firewallregeln auf Serverebene, die auch über das Azure-Portal oder mit PowerShell erstellt und verwaltet werden können). Weitere Informationen finden Sie unter [IP-Firewallregeln für Azure SQL-Datenbank und Azure Synapse Analytics](./firewall-configure.md). Mit dieser Regel werden alle Firewallregeln auf Datenbankebene aufgelistet, um alle vorgenommenen Änderungen identifizieren und berücksichtigen zu können.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2065     |Firewallregeln auf Serverebene müssen zumindest nachverfolgt und verwaltet werden.          |High         |Die Azure SQL-Firewall auf Serverebene schützt Ihre Daten, indem jeglicher Zugriff auf Ihre Datenbanken verhindert wird, außer durch IP-Adressen, denen Sie eine Zugriffsberechtigung erteilen. Firewallregeln auf Serverebene gewähren Zugriff auf alle Datenbanken, die zum Server gehören, basierend auf der Ursprungs-IP-Adresse der jeweiligen Anforderung.  Firewallregeln auf Serverebene können über Transact-SQL sowie mithilfe des Azure-Portals und mit PowerShell erstellt und verwaltet werden. Weitere Informationen finden Sie unter [IP-Firewallregeln für Azure SQL-Datenbank und Azure Synapse Analytics](./firewall-configure.md).  Mit dieser Regel werden alle Firewallregeln auf Serverebene aufgelistet, um alle vorgenommenen Änderungen identifizieren und berücksichtigen zu können.         |<nobr/>SQL-Datenbank<br/><br/>Azure Synapse         |
|VA2111     |Beispieldatenbanken müssen entfernt werden.          |Niedrig         |Im Lieferumfang von Microsoft SQL Server sind mehrere Beispieldatenbanken enthalten. Mit dieser Regel wird überprüft, ob die Beispieldatenbanken entfernt wurden.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2120     |Funktionen, die sich auf die Sicherheit auswirken können, müssen deaktiviert werden.          |High         |SQL Server umfasst eine breite Palette von Funktionen und Diensten. Einige der standardmäßig bereitgestellten Funktionen und Dienste sind möglicherweise nicht erforderlich, und ihre Aktivierung kann die Sicherheit des Systems beeinträchtigen. Mit dieser Regel wird überprüft, ob diese Funktionen deaktiviert sind.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2121     | Die Funktion „OLE-Automatisierungsprozeduren“ muss deaktiviert werden.         |High         |SQL Server umfasst eine breite Palette von Funktionen und Diensten. Einige der standardmäßig bereitgestellten Funktionen und Dienste sind möglicherweise nicht erforderlich, und ihre Aktivierung kann die Sicherheit des Systems beeinträchtigen. Mit der Option „OLE-Automatisierungsprozeduren“ wird gesteuert, ob OLE-Automatisierungsobjekte in Transact-SQL-Batches instantiiert werden können. Hierbei handelt es sich um erweiterte gespeicherte Prozeduren, mit denen SQL Server-Benutzer Funktionen außerhalb von SQL Server ausführen können. Ungeachtet ihrer Vorteile kann die Funktion auch ausgenutzt werden, um Dateien auf einem Zielcomputer einzuschleusen. Es wird empfohlen, anstelle dieses Tools PowerShell zu verwenden. Mit dieser Regel wird überprüft, ob die Funktion „OLE-Automatisierungsprozeduren“ deaktiviert ist.          |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2122     |Die Funktion „Benutzeroptionen“ muss deaktiviert werden.          |Medium         |SQL Server umfasst eine breite Palette von Funktionen und Diensten. Einige der standardmäßig bereitgestellten Funktionen und Dienste sind möglicherweise nicht erforderlich, und ihre Aktivierung kann die Sicherheit des Systems beeinträchtigen. Über die Benutzeroptionen werden globale Standardwerte für alle Benutzer angegeben. Es wird eine Liste der Standardoptionen der Abfrageverarbeitung für die Dauer der Sitzung eines Benutzers erstellt. Über die Benutzeroptionen können Sie die Standardwerte der SET-Optionen ändern (wenn die Standardeinstellungen des Servers nicht geeignet sind). Mit dieser Regel wird überprüft, ob die Funktion „Benutzeroptionen“ deaktiviert ist.         |<nobr>ab SQL Server 2012<nobr/><br/><br/>Verwaltete SQL-Instanz         |
|VA2126     |Erweiterungsfunktionen, die sich auf die Sicherheit auswirken können, müssen deaktiviert werden, wenn sie nicht benötigt werden.          |Mittel         |SQL Server bietet eine breite Palette von Funktionen und Diensten. Einige der standardmäßig bereitgestellten Funktionen und Dienste sind möglicherweise nicht erforderlich, und ihre Aktivierung kann die Sicherheit des Systems beeinträchtigen. Mit dieser Regel wird überprüft, ob Konfigurationen, die das Extrahieren von Daten in eine externe Datenquelle und die Ausführung von Skripts mit bestimmten Remotespracherweiterungen zulassen, deaktiviert sind.         |<nobr>ab SQL Server 2016<nobr/>         |

## <a name="removed-rules"></a>Entfernte Regeln

|Regel-ID  |Titel der Regel  |
|---------|---------|
|VA1021     |Globale temporär gespeicherte Prozeduren müssen entfernt werden.         |
|VA1024    |C2-Überwachungsmodus sollte aktiviert sein |
|VA1069     |Berechtigungen zur Auswahl aus Systemtabellen und -sichten müssen für Benutzer ohne Systemadministratorberechtigung widerrufen werden.         |
|VA1090    |Stellen Sie sicher, dass alle GOTS (Government Off-The-Shelf)- und benutzerdefinierten Speicherprozeduren verschlüsselt sind |
|VA1103    |Verwenden Sie die CLR nur mit der Berechtigung „SAFE_ACCESS“ |
|VA1229     |Die Einstellung „Filestream“ muss in der Registrierung und in der Konfiguration von SQL Server identisch sein.         |
|VA1231     |Die Option „Filestream“ (SQL) muss deaktiviert werden.         |
|VA1234     |Die Einstellung „Common Criteria“ muss aktiviert werden.         |
|VA1252     |Liste der Ereignisse, die mithilfe von Serverüberwachungsspezifikationen überwacht und zentral verwaltet werden.         |
|VA1253     |Liste der Ereignisse mit DB-Gültigkeitsbereich, die mithilfe von Serverüberwachungsspezifikationen überwacht und zentral verwaltet werden.         |
|VA1263     |Es werden alle aktiven Überwachungen im System aufgelistet.         |
|VA1266     |Die Option „MUST_CHANGE“ muss für alle SQL-Anmeldenamen festgelegt werden.         |
|VA1276     |Die Funktion „Agent XPs“ muss deaktiviert werden.         |
|VA1286     |Prinzipalen dürfen keine Datenbankberechtigungen direkt erteilt werden (OBJECT oder COLUMN).         |
|VA2000     |Berechtigungen mit großen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2001     |Berechtigungen für Objekte oder Spalten mit großen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2002     |Berechtigungen für verschiedene sicherungsfähige Elemente mit großen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2010     |Berechtigungen mit mittleren Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2021     |ALTER-Berechtigungen für Objekte oder Spalten im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2022     |ALTER-Berechtigungen für verschiedene sicherungsfähige Elemente im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2030     |SELECT- oder EXECUTE-Berechtigungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2031     |SELECT-Berechtigungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.          |
|VA2032     |SELECT- oder EXECUTE-Berechtigungen für Schemas im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2034     |EXECUTE-Berechtigungen für die XML-Schemaauflistung im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2040     |Berechtigungen mit geringen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2041     |Berechtigungen für Objekte oder Spalten mit geringen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2042     |Berechtigungen für Schemas mit geringen Auswirkungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2050     |VIEW DEFINITION-Berechtigungen im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2051     |VIEW DEFINITION-Berechtigungen für Objekte oder Spalten im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2052     |VIEW DEFINITION-Berechtigungen für verschiedene sicherungsfähige Elemente im Gültigkeitsbereich der Datenbank müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2100     |Berechtigungen mit großen Auswirkungen im Gültigkeitsbereich des Servers müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2101     |Berechtigungen mit mittleren Auswirkungen im Gültigkeitsbereich des Servers müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2102     |Berechtigungen mit geringen Auswirkungen im Gültigkeitsbereich des Servers müssen auf eine minimale Gruppe von Prinzipalen beschränkt werden.         |
|VA2104     |Ausführungsberechtigungen für erweiterte gespeicherte Prozeduren für die Rolle „public“ müssen widerrufen werden.         |
|VA2105     |Das Kennwort für die Anmeldung darf nicht leicht zu erraten sein.         |
|VA2112     |Die Berechtigungen für Data Transformation Services (DTS) müssen für die Rolle „public“ widerrufen werden.         |
|VA2115     |Nur eine minimale Gruppe von Prinzipalen darf Mitglied von festen Serverrollen mit mittleren Auswirkungen sein.         |
|VA2123     |Die Funktion „Remotezugriff“ muss deaktiviert werden.         |
|VA2127     |Die Funktion „Externe Skripts“ muss deaktiviert werden.         |

## <a name="next-steps"></a>Nächste Schritte

- [Sicherheitsrisikobewertung](sql-vulnerability-assessment.md)
- [Änderungsprotokoll für die Regeln der SQL-Sicherheitsrisikobewertung](sql-database-vulnerability-assessment-rules-changelog.md)
